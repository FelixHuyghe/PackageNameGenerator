jQuery(document).ready(function($){"use strict";$(".big-cta").hover(function(){$('.cta a').addClass("animated shake");},function(){$('.cta a').removeClass("animated shake");});$(".box").hover(function(){$(this).find('.icon').addClass("animated fadeInDown");$(this).find('p').addClass("animated fadeInUp");},function(){$(this).find('.icon').removeClass("animated fadeInDown");$(this).find('p').removeClass("animated fadeInUp");});$('.accordion').on('show',function(e){$(e.target).prev('.accordion-heading').find('.accordion-toggle').addClass('active');$(e.target).prev('.accordion-heading').find('.accordion-toggle i').removeClass('icon-plus');$(e.target).prev('.accordion-heading').find('.accordion-toggle i').addClass('icon-minus');});$('.accordion').on('hide',function(e){$(this).find('.accordion-toggle').not($(e.target)).removeClass('active');$(this).find('.accordion-toggle i').not($(e.target)).removeClass('icon-minus');$(this).find('.accordion-toggle i').not($(e.target)).addClass('icon-plus');});$('.social-network li a, .options_box .color a').tooltip();$(".fancybox").fancybox({padding:0,autoResize:true,beforeShow:function(){this.title=$(this.element).attr('title');this.title='<h4>'+this.title+'</h4>'+'<p>'+$(this.element).parent().find('img').attr('alt')+'</p>';},helpers:{title:{type:'inside'},}});$(window).scroll(function(){if($(this).scrollTop()>100){$('.scrollup').fadeIn();}else{$('.scrollup').fadeOut();}});$('.scrollup').click(function(){$("html, body").animate({scrollTop:0},1000);return false;});$('#post-slider').flexslider({controlNav:false,directionNav:true,prevText:"Previous",nextText:"Next",keyboard:true,multipleKeyboard:false,mousewheel:false,pausePlay:false,pauseText:'Pause',playText:'Play',controlsContainer:"",manualControls:"",sync:"",asNavFor:"",});$('#main-slider').flexslider({namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:false,animationLoop:true,smoothHeight:false,startAt:0,slideshow:true,slideshowSpeed:7000,animationSpeed:600,initDelay:0,randomize:false,pauseOnAction:true,pauseOnHover:false,useCSS:true,touch:true,video:false,controlNav:true,directionNav:true,prevText:"Previous",nextText:"Next",keyboard:true,multipleKeyboard:false,mousewheel:false,pausePlay:false,pauseText:'Pause',playText:'Play',controlsContainer:"",manualControls:"",sync:"",asNavFor:"",});});;$(document).ready(function(){var navbarToggle='.navbar-toggle';$('.dropdown, .dropup').each(function(){var dropdown=$(this),dropdownToggle=$('[data-toggle="dropdown"]',dropdown),dropdownHoverAll=dropdownToggle.data('dropdown-hover-all')||false;dropdown.hover(function(){var notMobileMenu=$(navbarToggle).size()>0&&$(navbarToggle).css('display')==='none';if((dropdownHoverAll==true||(dropdownHoverAll==false&&notMobileMenu))){dropdownToggle.trigger('click');}})});$('[data-block-bg-img]').each(function(){var $this=$(this),bgImg=$this.data('block-bg-img');$this.css('backgroundImage','url('+bgImg+')').addClass('block-bg-img');});$(window).scroll(function(){if($(this).scrollTop()>100){$('.scrolltop').fadeIn();}else{$('.scrolltop').fadeOut();}});$('.scrolltop').click(function(){$("html, body").animate({scrollTop:0},600);return false;});});$(document).ready(function(){$(".hide_yes_js").hide();$(".hide_no_js").show();$("a[rel*='external']").click(function(e){e.preventDefault();var win=window.open($(this).attr("href"),'_blank');win.focus();});$(".with_popover").popover({trigger:'manual',container:'body'}).focus(function(){$(this).popover("show");}).blur(function(){$(this).popover("hide");});$(document).on("click",".open-wd",function(e){e.preventDefault();window.open($(this).attr("href"),'','top=0,left=0,width=900,height=600,scrollbars=yes,status=no,menubar=no,toolbar=no');});$(document).on("click",".confirm",function(e){var are_you_sure="<span id=\"confirmation_message\"></span>";if($(this).prop("title").indexOf("?")<=0){are_you_sure="Are you sure you want to <span id=\"confirmation_message\"></span>?";}
if($("#confirmModal").length==0){$("body").append('  <div class="modal" id="confirmModal" role="dialog" aria-labelledby="confirmModal" aria-hidden="true">'+'    <div class="modal-dialog">'+'      <div class="modal-content">'+'        <div class="modal-header">'+'          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>'+'          <h4 class="modal-title">Confirmation required</h4>'+'        </div>'+'        <div class="modal-body">'+'          <div id=\"media-modal-content\">'+'    <input type="hidden" id="confirmation_url" value="" />'+'    <p>'+are_you_sure+'</p>'+'     </div>'+'        </div>'+'        <div class="modal-footer">'+'          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>'+'          <button type="button" id="confirmation_accept" class="btn btn-default">Accept</button>'+'        </div>'+'      </div><!-- /.modal-content -->'+'    </div><!-- /.modal-dialog -->'+'  </div><!-- /.modal -->');}
$('#confirmModal').modal('show');$("#confirmation_message").text($(this).prop("title"));$("#confirmation_url").val($(this).prop("href"));return false;});$(document).on("click","#confirmation_accept",function(){url=$("#confirmation_url").val();location.href=url;});if(typeof tinymce!="undefined"){tinymce.init({selector:".basic_tinymce",nanospell_server:"php",nanospell_dictionary:"es",plugins:["paste link code lists"],menubar:false,toolbar:"undo redo | bold italic formatselect | alignleft aligncenter alignright alignjustify | bullist numlist | link code"});}
$('[data-toggle="tooltip"]').tooltip({});$(".share-button").click(function(e){e.preventDefault();window.open($(this).attr("href"),"facebook-share","height=300,width=600");});$("#comentario_form").submit(function(e){e.preventDefault();formData=$(this).serializeArray();action=$(this).attr("action");formData.push({name:"comment_num",value:$("#comentario_list li").length});$.ajax({url:action,data:formData,type:"POST",dataType:"json",beforeSend:function(){$("#submit_comentario").attr("disabled","disabled");},success:function(e){$("#submit_comentario").removeAttr("disabled");$("#comentario_mensaje_ajax").html("");if(e.error){$("#comentario_mensaje_ajax").html("<div class='alert alert-danger'>"+e.error+"</div>");grecaptcha.reset();$('html, body').animate({scrollTop:$("#comentario_mensaje_ajax").offset().top},1000);}else{if($("#div_comment_"+e.comid).length>0){$("#div_comment_"+e.comid).replaceWith(e.comment);}else{$("#comentario_list").append(e.comment);}
$("#comment_text").val("");$('html, body').animate({scrollTop:$("#div_comment_"+e.comid).offset().top},1000);$("#comname,#commail").removeAttr("readonly");$("#comid,#old_number").val("");}
if(typeof Recaptcha!="undefined"){Recaptcha.reload();}},error:function(){$("#submit_comentario").removeAttr("disabled");}});});$(".edit_comment_ajax").on("click",function(e){e.preventDefault();href=$(this).attr("href");comid=$(this).attr("id").replace("edit_comment_","");$.ajax({url:href,data:null,type:"GET",dataType:"json",beforeSend:function(){$("#submit_comentario").attr("disabled","disabled");$('html, body').animate({scrollTop:$("#escribe_comentario").offset().top},1000);},success:function(e){$("#submit_comentario").removeAttr("disabled");$("#comentario_mensaje_ajax").html("");if(e.error){$("#comentario_mensaje_ajax").html("<div class='alert alert-danger'>"+e.error+"</div>");$('html, body').animate({scrollTop:$("#comentario_mensaje_ajax").offset().top},1000);}else{$("#old_number").val($("#serial_"+comid).html());$("#comid").val(comid);$("#comname").val(e.comname);$("#commail").val(e.commail);$("#comname,#commail").attr("readonly","readonly");$("#comment_text").val(e.comment_raw);}
if(typeof Recaptcha!="undefined"){Recaptcha.reload();}},error:function(){$("#submit_comentario").removeAttr("disabled");}});});$("#estudios_lista, #experiencias_lista").on("click",".borrar_estudios, .borrar_experiencias",function(e){var type=$(this).hasClass('borrar_estudios')?'estudios':'experiencias';var id=$(this).attr('id').replace('borrar_'+type+'_','');console.log('borrar id: '+id);total_filas=$('.'+type+'_fila').length;console.log('quedan filas: '+total_filas);if(total_filas==1){console.log('triggering '+'#add_'+type+'_'+id);$('#add_'+type+'_'+id).trigger('click');}
console.log('remove');$('#'+type+'_fila_'+id).remove();});$("#estudios_lista, #experiencias_lista").on("click",".add_estudios, .add_experiencias",function(e){var type=$(this).hasClass('add_estudios')?'estudios':'experiencias';var primera_fila_id=$('.'+type+'_fila:first').attr('id').replace(type+'_fila_','');var ultima_fila_id=$('.'+type+'_fila:last').attr('id').replace(type+'_fila_','');var nuevo_id=parseInt(ultima_fila_id)+1;var clone=$('#'+type+'_fila_'+primera_fila_id).clone().attr('id',type+'_fila_'+nuevo_id).appendTo('#'+type+'_lista table');$('#'+type+'_fila_'+nuevo_id).find('[name="borrar_'+type+'"]').attr('id','borrar_'+type+'_'+nuevo_id);$('#'+type+'_fila_'+nuevo_id).find('input:hidden').val('');$('#'+type+'_fila_'+nuevo_id).find('input:text').val('');$('#'+type+'_fila_'+nuevo_id).find('select').val('');});function initialize_birth_pickers(){$(".date-dropdowns").each(function(){var field_name=$(this).attr("id");if(field_name.indexOf("%")<0){var $current_field=$(this);if($(this).val()){var date_parts=$(this).val().split("/");$("#"+field_name+"_day").val(date_parts[0]);$("#"+field_name+"_month").val(date_parts[1]);$("#"+field_name+"_year").val(date_parts[2]);}
$("#"+field_name+"_day,#"+field_name+"_month,#"+field_name+"_year").change(function(){var date_formed=$("#"+field_name+"_day").val()+"/"+$("#"+field_name+"_month").val()+"/"+$("#"+field_name+"_year").val();$current_field.val(date_formed);});}});}
initialize_birth_pickers();$(document).on("click",".gusto-icon",function(){gusto_id=$(this).data("gusto");$checkbox=$("#gusto-"+gusto_id);if($checkbox.is(":checked")){$(this).removeClass("active");$checkbox.prop("checked",false);}else{$(this).addClass("active");$checkbox.prop("checked",true);}});$(document).on("click",".corrije-logo-ajax",function(){original_object=this;$.ajax({url:homeurl+"admin/corrige_logo_ajax/",data:{empresa_id:$(this).data("empresa-id"),logo_url:$(this).data("logo-url")},type:"POST",dataType:"json",beforeSend:function(){},success:function(response){$(original_object).after("<br /><span class='glyphicon glyphicon-ok'></span>");},error:function(response){alert("Error AJAX");}});});function change_form_step(next_step)
{current_step=parseInt($("#curriculum-form").data("current"));$("#curriculum-form").data("current",next_step);$("#step-selector-"+current_step).removeClass("active");$("#step-selector-"+next_step).addClass("active");$("#step-"+current_step).addClass("hide");$("#step-"+next_step).removeClass("hide");if(next_step==1){$(".prev-step").addClass("hide");}else{$(".prev-step").removeClass("hide");}
if(next_step==5){$(".next-step").addClass("hide");$(".submit-step").removeClass("hide");}else{$(".next-step").removeClass("hide");$(".submit-step").addClass("hide");}}
function move_form_step(movement)
{current_step=parseInt($("#curriculum-form").data("current"));if(movement<0){next_step=current_step-1;}else{next_step=current_step+1;}
change_form_step(next_step);}
$(document).on("click",".prev-step",function(){move_form_step(-1);});$(document).on("click",".next-step",function(){move_form_step(1);});$(document).on("click",".step-selector-button",function(e){e.preventDefault();change_form_step(parseInt($(this).data("step")));});$(".btn-check [type='checkbox']").on("change",function(){if($(this).is(":checked")){$(".fa-check",$(this).parent("label")).removeClass("hide");}else{$(".fa-check",$(this).parent("label")).addClass("hide");}})
if($(".word-popover").length>0){var popovers_shown={};var remove_popovers_timeout=0;$(document).on("mouseover",".word-popover,.popover",function(){clearTimeout(remove_popovers_timeout);});function load_popover(object){var current_id=$(object).attr("id");if(typeof popovers_shown[current_id]!="undefined"){show_popover(current_id,popovers_shown[current_id]);}else{$.ajax({url:"/ajax/render_popover",data:{word_id:$(object).data("word"),spelling_id:$(object).data("spelling")},type:"GET",dataType:"json",beforeSend:function(){},success:function(response){popovers_shown[current_id]={title:response.title,content:response.content,}
show_popover(current_id,popovers_shown[current_id]);},error:function(response){}});}}
$(document).on("click",".word-popover",function(){var current_id=$(this).attr("id");if($("#"+current_id).next('div.popover:visible').length==0){load_popover(this);}else{$(".popover").hide();}});$(document).on("mouseover",".word-popover",function(){load_popover(this);});$(document).on("mouseleave",".word-popover,.popover",function(){remove_popovers_timeout=setTimeout(function(){$(".popover").hide();},350);});function show_popover(current_id,content)
{$(".popover").hide();$("#"+current_id).popover({placement:"bottom",trigger:"manual",html:true,content:content.content,title:"<strong>"+content.title+"</strong>",container:'body',});$("#"+current_id).popover("show");}}
$(document).on("change",".filter-word-list",function(){this.form.submit();});var email_re=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;$('#purchase-modal').on('shown.bs.modal',function(e){$("#purchase_email").focus();if(!email_re.test($('#purchase_email').val())){$("#purchase-submit-button").attr("disabled",true);}});$('#purchase_email').on('input',function(){var input=$(this);var is_email=email_re.test(input.val());if(is_email){input.parent(".form-group").removeClass("has-error").addClass("has-success");$("#purchase-submit-button").attr("disabled",false);}else{input.parent(".form-group").removeClass("has-success").addClass("has-error");$("#purchase-submit-button").attr("disabled",true);}});$("#cms_upload_photo").change(function(){this.form.submit();});});(function($){$.fn.infiniteJscroll=function(){var $win=this;var options=$.extend({offset:100,topOfPage:function(){},bottomOfPage:function(){},pageInit:function(){}},arguments[0]||{});$(document).ready(function(){options.pageInit.call(this);});$win.scroll(function(){if($win.scrollTop()==0){options.topOfPage.call(this);}
else if($win.scrollTop()+options.offset>=$(document).height()-$(window).height()){options.bottomOfPage.call(this);}});};}(jQuery));var loading_infinite_scroll=false;if($('#infinite-scroll-area').length>0){$(document).scroll(function(){win_height=$(window).height();doc_height=$(document).height();cur_scroll=$(document).scrollTop();element_height=$("#infinite-scroll-area").height();has_more=parseInt($("#infinite-scroll-area").data("has-more"));if(has_more&&cur_scroll+win_height>element_height){if(!loading_infinite_scroll){loading_infinite_scroll=true;current_page=$("#infinite-scroll-area").data("current");$.ajax({url:$("#infinite-scroll-area").data("url"),data:{page:current_page+1,parameters:$("#infinite-scroll-area").data("parameters")},type:"GET",dataType:"json",beforeSend:function(){},success:function(response){$("#infinite-scroll-area").data("current",current_page+1);$("#infinite-scroll-area").data("has-more",response.has_more);$($("#infinite-scroll-area").data("append-to")).append(response.html);loading_infinite_scroll=false;if(!parseInt(response.has_more)){$("#ver-todo-link").hide();}},error:function(response){}});}else{}}});}